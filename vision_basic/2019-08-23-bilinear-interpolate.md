#### 双线性插值的一些笔记

##### 问题描述

图像缩放等场景需要用到

通常:
$$
x_{src} =w_{src}/w_{dst}*x_{dst}\\
y_{src} =h_{src}/h_{dst}*y_{dst}
$$
取临近的四个像素点的值用来插值

`例子`:

$f(1.2,3.4)$的值，选取$(1,3),(2,3),(1,4),(2,4)$四个点，写作:
$f(i+u,j+v)$的形式，$u=0.2,v=0.4,i=1,j=3$

得到:$f(i+u,j+v) = (1-u)(1-v)f(i,j) + (1-u)vf(i,j+1) + u(1-v)f(i+1,j) + uvf(i+1,j+1)$

##### 优化策略

+ 源图像和目标图像几何中心对齐
+ 浮点运算转换成整数运算

对齐公式为:
$$
x_{src} =w_{src}/w_{dst}*(x_{dst}+0.5)-0.5 \\
y_{src} =h_{src}/h_{dst}*(y_{dst}+0.5)-0.5
$$
原因，例子说明:

假设源图像为$3\times3$，目标图像为$9\times9$中心点坐标分别为:$(1,1),(4,4)$，那么在将$(4,4)$映射到$(1,1)$的时候，计算出来的$(x,y)$为$(1.3333,1.333)$对应在中心点右下方，不是均匀分布整个图像，中心点对齐后刚好满足.

浮点数对齐主要是将浮点数近似成整数，再利用移位运算减少计算量.